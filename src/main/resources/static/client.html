<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="UTF-8">
    <title>STOMP WebSocket í…ŒìŠ¤íŠ¸</title>
</head>
<body>
<h2>STOMP WebSocket í…ŒìŠ¤íŠ¸</h2>

<div>
    <button onclick="connect()">Connect</button>
    <button onclick="disconnect()">Disconnect</button>
</div>

<div>
    <input type="text" id="messageInput" placeholder="ë³´ë‚¼ ë©”ì‹œì§€ ì…ë ¥" />
    <button onclick="sendMessage()">Send</button>
</div>

<div>
    <h4>ì„œë²„ë¡œë¶€í„° ë°›ì€ ë©”ì‹œì§€</h4>
    <pre id="messages"></pre>
</div>

<!-- SockJS & STOMP.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>

<script>
    let stompClient = null;

    function connect() {
    const socket = new SockJS("http://localhost:8080/ws"); // Spring Bootì— ë§ê²Œ ìˆ˜ì •
    stompClient = Stomp.over(socket);

    stompClient.connect({}, function (frame) {
    console.log('Connected: ' + frame);
    stompClient.subscribe("/topic/notification", function (message) {
    showMessage(message.body);
});
    showMessage("ğŸ”— ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.");
});
}

    function disconnect() {
    if (stompClient !== null) {
    stompClient.disconnect();
}
    showMessage("âŒ ì—°ê²° í•´ì œë¨.");
}

    function sendMessage() {
    const msg = document.getElementById("messageInput").value;
    stompClient.send("/app/hello", {}, JSON.stringify({ message: msg }));
}

    function showMessage(message) {
    const messagesEl = document.getElementById("messages");
    messagesEl.textContent += message + "\n";
}
</script>
</body>
</html>